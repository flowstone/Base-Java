<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="me.xueyao.mybatis.mapper.UserMapper">
    <!--
    <select id="queryUserById" resultType="User" >
        SELECT
            id,
            user_name,
            password,
            name,
            age,
            sex,
            birthday,
            created,
            updated
        FROM tb_user where id = #{id}
    </select>
    -->
    <select id="queryUsersByTableName" resultType="User">
        SELECT
            id,
            user_name,
            password,
            name,
            age,
            sex,
            birthday,
            created,
            updated
        FROM ${tableName}
    </select>

    <select id="login" resultType="User" parameterType="String">
        SELECT * FROM tb_user WHERE user_name = #{userName} AND password = #{password};
    </select>
    <!--
        简单对象：#{key} |  ${key}
        POJO:  #{key.属性名}  |  ${key.属性名}
    -->
    <select id="loginMap" resultType="User" parameterType="String">
        SELECT * FROM tb_user WHERE user_name = #{userName} AND password = #{password};
    </select>

    <!--<select id="queryUsersLikeUserName" resultType="User">
        SELECT * FROM tb_user WHERE user_name like '%${userName}%'
    </select>-->
    
    <select id="queryUsersLikeUserName" resultType="User">
        SELECT * FROM tb_user WHERE user_name LIKE '%' #{userName} '%'
    </select>
    
    <resultMap id="userMap" type="User" autoMapping="true">
        <id column="id" property="id"/>
        <result column="user_name" property="userName" />
    </resultMap>
    <select id="queryUserById" resultMap="userMap">
        SELECT <include refid="CommonSQL.commonSql"/> FROM tb_user where id = #{id}
    </select>

    <select id="queryUserListLikeUserName" resultType="User">
        SELECT * from tb_user WHERE sex = 1
        <if test="userName!=null and userName.trim()!=''">
         and  user_name   LIKE '%' #{userName} '%'
        </if>
    </select>
</mapper>